/* =====================
   TIPTAP BASE STYLES
   ===================== */

.tiptap {
  /* 기본 스타일 - Tailwind로 대체 가능한 부분은 제거하고 핵심만 유지 */
  box-sizing: border-box;
  white-space: pre-wrap; /* 연속된 공백과 줄바꿈 보존 */

  /* CSS 변수들 */
  --blockquote-bg-color: #18181b; /* zinc-900 */
  --tt-inline-code-bg-color: var(--tt-alpha-border-subtle);
  --tt-inline-code-text-color: #3f3f46; /* zinc-700 */
  --tt-inline-code-border-color: var(--tt-alpha-border);
  --tt-codeblock-bg: #fafafa; /* zinc-50 */
  --tt-codeblock-text: #18181b; /* zinc-900 */
  --tt-codeblock-border: var(--tt-alpha-border);
  --horizontal-rule-color: var(--tt-alpha-border);
  --link-text-color: #2563eb; /* blue-600 */
}

.dark .tiptap {
  --blockquote-bg-color: #fafafa; /* zinc-50 */
  --tt-inline-code-bg-color: var(--tt-alpha-border-subtle);
  --tt-inline-code-text-color: #d4d4d8; /* zinc-300 */
  --tt-inline-code-border-color: var(--tt-alpha-border);
  --tt-codeblock-bg: #18181b; /* zinc-900 */
  --tt-codeblock-text: #fafafa; /* zinc-50 */
  --tt-codeblock-border: var(--tt-alpha-border);
  --horizontal-rule-color: var(--tt-alpha-border);
  --link-text-color: #60a5fa; /* blue-400 */
}

/* 제목 스타일 - Title보다 작게 유지하기 위해 내가 커스텀 */
.tiptap h1,
.tiptap h2,
.tiptap h3,
.tiptap h4 {
  position: relative;
  color: inherit;
  font-style: inherit;
}

.tiptap h1:first-child,
.tiptap h2:first-child,
.tiptap h3:first-child,
.tiptap h4:first-child {
  margin-top: 0;
}

.tiptap h1 {
  @apply mb-4 mt-6 text-2xl font-bold;
}

.tiptap h2 {
  @apply mb-3 mt-5 text-xl font-semibold;
}

.tiptap h3 {
  @apply mb-3 mt-4 text-lg font-semibold;
}

.tiptap h4 {
  @apply mb-2 mt-3 text-base font-semibold;
}

/* 단락 스타일 */
/* 기본 단락 스타일은 Tailwind Typography가 처리 */

/* 리스트 스타일 */
.tiptap ol,
.tiptap ul {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
  padding-left: 1.5em;
}

.tiptap ol:first-child,
.tiptap ul:first-child {
  margin-top: 0;
}

.tiptap ol:last-child,
.tiptap ul:last-child {
  margin-bottom: 0;
}

.tiptap ol ol,
.tiptap ol ul,
.tiptap ul ol,
.tiptap ul ul {
  margin-top: 0;
  margin-bottom: 0;
}

.tiptap li p {
  margin-top: 0;
  line-height: 1.6;
}

.tiptap ol {
  list-style: decimal;
}

.tiptap ol ol {
  list-style: lower-alpha;
}

.tiptap ol ol ol {
  list-style: lower-roman;
}

.tiptap ul:not([data-type="taskList"]) {
  list-style: disc;
}

.tiptap ul:not([data-type="taskList"]) ul {
  list-style: circle;
}

.tiptap ul:not([data-type="taskList"]) ul ul {
  list-style: square;
}

/* 인용구 스타일 */
.tiptap blockquote {
  position: relative;
  padding-left: 1em;
  padding-top: 0.375em;
  padding-bottom: 0.375em;
  margin: 1.5rem 0;
}

.tiptap blockquote p {
  margin-top: 0;
}

.tiptap blockquote::before,
.tiptap blockquote.is-empty::before {
  position: absolute;
  bottom: 0;
  left: 0;
  top: 0;
  height: 100%;
  width: 0.25em;
  background-color: var(--blockquote-bg-color);
  content: "";
  border-radius: 0;
}

.tiptap blockquote::after {
  content: none;
}

/* 코드 블록 스타일 */
.tiptap code {
  background-color: var(--tt-inline-code-bg-color);
  color: var(--tt-inline-code-text-color);
  border: 1px solid var(--tt-inline-code-border-color);
  font-family: "JetBrains Mono NL", monospace;
  font-size: 0.875em;
  line-height: 1.4;
  border-radius: 6px/0.375rem;
  padding: 0.1em 0.2em;
}

.tiptap pre {
  background-color: var(--tt-codeblock-bg);
  color: var(--tt-codeblock-text);
  border: 1px solid var(--tt-codeblock-border);
  margin-top: 1.5em;
  margin-bottom: 1.5em;
  padding: 1em;
  font-size: 1rem;
  border-radius: 6px/0.375rem;
}

.tiptap pre code {
  background-color: transparent;
  border: none;
  border-radius: 0;
  -webkit-text-fill-color: inherit;
  color: inherit;
}

.tiptap code::before,
.tiptap code::after {
  content: none;
}

/* 수평선 스타일 */
.tiptap hr {
  border: none;
  height: 1px;
  background-color: var(--horizontal-rule-color);
}

.tiptap [data-type="horizontalRule"] {
  margin-top: 2.25em;
  margin-bottom: 2.25em;
  padding-top: 0.75rem;
  padding-bottom: 0.75rem;
}

/* 이미지 스타일 */
.tiptap img {
  max-width: 100%;
  height: auto;
  display: block;
}

.tiptap > img:not([data-type="emoji"] img) {
  margin: 2rem 0;
  outline: 0.1875rem solid transparent;
  border-radius: var(--tt-radius-xs, 0.25rem);
}

.tiptap [data-type="emoji"] img {
  display: inline-block;
  width: 1.25em;
  height: 1.25em;
  cursor: text;
}

/* 링크 스타일 */
.tiptap a {
  color: var(--link-text-color);
  text-decoration: underline;
}

.tiptap a span {
  text-decoration: underline;
}

/* Tailwind Typography 인용구 따옴표 제거 */
.prose blockquote p::before,
.prose blockquote p::after {
  content: none !important;
}
